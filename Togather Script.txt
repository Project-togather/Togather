-- 관리자계정
-- create user togather identified by togather;
-- grant connect, resource to togather;

--=============================================================
-- DROP TABLE
DROP TABLE MEMBER;
DROP TABLE CLASS;
DROP TABLE ATTACHMENT;
DROP TABLE REPLY;
DROP TABLE FEED;
DROP TABLE REPORT;
DROP TABLE QNA;
DROP TABLE NOTICE;
DROP TABLE GREAT;
DROP TABLE FOLLOW;
DROP TABLE CL_MEM;
DROP TABLE MY_CLASS;
DROP TABLE INTEREST;
DROP TABLE CL_TYPE;
-- DROP TABLE CHATTING;
-- DROP TABLE ALARM;


--=============================================================
-- DROP SEQUNCE
DROP SEQUENCE SEQ_MNO; -- MEMBER (회원)
DROP SEQUENCE SEQ_CNO; -- CLASS (모임)
DROP SEQUENCE SEQ_ANO; -- ATTACHMENT (사진)
DROP SEQUENCE SEQ_RENO; -- REPLY 댓글
DROP SEQUENCE SEQ_FNO; -- FEED 피드
DROP SEQUENCE SEQ_RNO; -- REPORT 신고
DROP SEQUENCE SEQ_QNO; -- QNA 자주묻는질문
DROP SEQUENCE SEQ_NONO; -- NOTICE 공지사항
DROP SEQUENCE SEQ_CHNO; -- CHATTING 채팅
-- ALARM 알람


--=============================================================
-- CREATE TABLE
-- MEMBER (회원)
CREATE TABLE MEMBER
(
    MEM_NO VARCHAR2(200) PRIMARY KEY
  , MEM_ID VARCHAR2(200) NOT NULL
  , MEM_PWD VARCHAR2(200) NOT NULL
  , MEM_NAME VARCHAR2(200) NOT NULL
  , NICKNAME VARCHAR2(200)
  , EMAIL VARCHAR2(200)
  , GENDER VARCHAR2(200) CHECK (GENDER IN('M' ,'F'))
  , AGE NUMBER
  , PHONE VARCHAR2(200)
  , ENROLL_DATE DATE DEFAULT SYSDATE
  , M_STATUS VARCHAR2(200) DEFAULT 'Y' CHECK (M_STATUS IN('Y' ,'N'))
  , MANNER NUMBER(3, 1)
  , INTEREST NUMBER NOT NULL
)
;

-- CLASS (모임)
CREATE TABLE CLASS
(
    C_NO VARCHAR2(200) PRIMARY KEY
  , C_TITLE VARCHAR2(200) NOT NULL
  , C_CONTENT VARCHAR2(1000) NOT NULL
  , C_LOCATION VARCHAR2(500) NOT NULL
  , C_DATE DATE DEFAULT SYSDATE NOT NULL
  , C_PRICE NUMBER
  , C_APPROVAL VARCHAR2(200)
  , AGE_LIMIT VARCHAR2(200)
  , PEOPLE_LIMIT NUMBER
  , GUIDE VARCHAR2(1000) NOT NULL
  , HOBBY_CATEGORY VARCHAR2(200)
  , C_CA NUMBER NOT NULL
  , MEM_NO VARCHAR2(200) NOT NULL
)
;

-- ATTACHMENT (사진)
CREATE TABLE ATTACHMENT
(
    ATT_NO VARCHAR2(200) NOT NULL
  , REF_FNO VARCHAR2(50)
  , ORIGIN_NAME VARCHAR2(500)
  , UPDATE_NAME VARCHAR2(500)
  , FILE_PATH VARCHAR2(1000)
  , ENROLL_DATE DATE DEFAULT SYSDATE
)
;

-- REPLY 댓글
CREATE TABLE REPLY
(
   R_NO VARCHAR2(200) PRIMARY KEY
 , R_CONTENT VARCHAR2(1000)
 , R_DATE DATE DEFAULT SYSDATE
 , R_STATUS VARCHAR2(200) DEFAULT 'Y'
 , REF_FNO VARCHAR2(200) NOT NULL
 , MEM_NO VARCHAR2(200) NOT NULL
);

-- FEED 피드
CREATE TABLE FEED
(
   FE_NO VARCHAR2(200) PRIMARY KEY
 , REF_CNO VARCHAR2(200) NOT NULL
 , FE_CONTENT VARCHAR2(1000)
 , FE_DATE DATE DEFAULT SYSDATE
 , FE_WRITER VARCHAR2(200)
 , F_STATUS VARCHAR2(200) DEFAULT 'Y'
)
;

-- REPORT 신고
CREATE TABLE REPORT
(
   RE_NO VARCHAR2(200) PRIMARY KEY
 , RE_MEM VARCHAR2(200) NOT NULL
 , REF_CNO VARCHAR2(200)
 , RE_PMEM VARCHAR2(200)
 , RE_CONTENT VARCHAR2(200)
 , RE_DATE DATE DEFAULT SYSDATE
)
;

-- QNA 자주묻는질문
CREATE TABLE QNA
(
   QNA_NO VARCHAR2(200) PRIMARY KEY
 , QNA_TITLE VARCHAR2(200) NOT NULL
 , QNA_CONTENT VARCHAR2(200)
 , QNA_STATUS VARCHAR2(200) DEFAULT 'Y'
)
;

-- NOTICE 공지사항
CREATE TABLE NOTICE
(
   NOTICE_NO VARCHAR2(200) PRIMARY KEY
 , NOTICE_TITLE VARCHAR2(200)
 , NOTICE_CONTENT VARCHAR2(1000)
 , NOTICE_VIEWS VARCHAR2(200) 
 , NOTICE_DATE DATE DEFAULT SYSDATE
 , NOTICE_STATUS VARCHAR2(200) DEFAULT 'Y'
)
;

-- GREAT 좋아요
CREATE TABLE GREAT
(
   MEM_NO2 VARCHAR2(200) NOT NULL
 , FE_NO VARCHAR2(200) NOT NULL
)
;

-- FOLLOW 팔로우
CREATE TABLE FOLLOW
(
   TO_MEM VARCHAR2(200) 
 , FROM_MEM VARCHAR2(200)
)
;

-- CL_MEM 참여 멤버
CREATE TABLE CL_MEM
(
   CLASS_NO VARCHAR2(200)
 , CL_MEM_NO VARCHAR2(200)
)
;

-- MY_CLASS 내모임
CREATE TABLE MY_CLASS
(
   CL_TYPE NUMBER
 , CL_NAME VARCHAR2(200)
)
;

-- INTEREST 관심사
CREATE TABLE INTEREST
(
   IN_NO NUMBER
 , IN_NAME VARCHAR2(200)
)
;

-- CL_TYPE 모임 성격
CREATE TABLE CL_TYPE
(
   CL_CA_NO NUMBER
 , CL_CA_NAME VARCHAR2(200)
)
;

-- CHATTING 채팅
-- CREATE TABLE CHATTING();


-- ALARM 알람
-- CREATE TABLE ALARM();




--=============================================================
-- CREATEA SEQUENCE
CREATE SEQUENCE SEQ_MNO NOCACHE; -- MEMBER
CREATE SEQUENCE SEQ_CNO NOCACHE; -- CLASS
CREATE SEQUENCE SEQ_ANO NOCACHE; -- ATTACHMENT
CREATE SEQUENCE SEQ_RENO NOCACHE; -- REPLY 댓글
CREATE SEQUENCE SEQ_FNO NOCACHE; -- FEED 피드
CREATE SEQUENCE SEQ_RNO NOCACHE; -- REPORT 신고
CREATE SEQUENCE SEQ_QNO NOCACHE; -- QNA 자주묻는질문
CREATE SEQUENCE SEQ_NONO NOCACHE; -- NOTICE 공지사항
CREATE SEQUENCE SEQ_CHNO NOCACHE; -- CHATTING 채팅
-- ALARM 알람



--=============================================================
-- COMMENT
-- MEMBER
COMMENT ON COLUMN MEMBER.MEM_NO IS '회원번호';
COMMENT ON COLUMN MEMBER.MEM_ID IS '회원아이디';
COMMENT ON COLUMN MEMBER.MEM_PWD IS '회원비밀번호';
COMMENT ON COLUMN MEMBER.MEM_NAME IS '회원이름';
COMMENT ON COLUMN MEMBER.NICKNAME IS '닉네임';
COMMENT ON COLUMN MEMBER.EMAIL IS '이메일';
COMMENT ON COLUMN MEMBER.GENDER IS '성별';
COMMENT ON COLUMN MEMBER.AGE IS '회원나이';
COMMENT ON COLUMN MEMBER.PHONE IS '휴대폰번호';
COMMENT ON COLUMN MEMBER.ENROLL_DATE IS '가입일';
COMMENT ON COLUMN MEMBER.M_STATUS IS '가입일';
COMMENT ON COLUMN MEMBER.MANNER IS '매너온도';
COMMENT ON COLUMN MEMBER.INTEREST IS '관심사';

-- CLASS
COMMENT ON COLUMN CLASS.C_NO IS '모임번호';
COMMENT ON COLUMN CLASS.C_TITLE IS '모임명';
COMMENT ON COLUMN CLASS.C_CONTENT IS '모임내용';
COMMENT ON COLUMN CLASS.C_LOCATION IS '모임 위치';
COMMENT ON COLUMN CLASS.C_DATE IS '모임 날짜';
COMMENT ON COLUMN CLASS.C_PRICE IS '모임 비';
COMMENT ON COLUMN CLASS.C_APPROVAL IS '승인제';
COMMENT ON COLUMN CLASS.AGE_LIMIT IS '나이 제한';
COMMENT ON COLUMN CLASS.PEOPLE_LIMIT IS '모임제한 명수';
COMMENT ON COLUMN CLASS.GUIDE IS '안내사항';
COMMENT ON COLUMN CLASS.HOBBY_CATEGORY IS '관심사 카테고리';
COMMENT ON COLUMN CLASS.C_CA IS '모임성격';
COMMENT ON COLUMN CLASS.MEM_NO IS '회원번호';

-- ATTACHMENT
COMMENT ON COLUMN ATTACHMENT.ATT_NO IS '파일번호';
COMMENT ON COLUMN ATTACHMENT.REF_FNO IS '참조게시글 번호';
COMMENT ON COLUMN ATTACHMENT.ORIGIN_NAME IS '원본명';
COMMENT ON COLUMN ATTACHMENT.UPDATE_NAME IS '수정명';
COMMENT ON COLUMN ATTACHMENT.FILE_PATH IS '파일경로';
COMMENT ON COLUMN ATTACHMENT.ENROLL_DATE IS '등록일';

-- REPLY 댓글
COMMENT ON COLUMN REPLY.R_NO IS '댓글 번호';
COMMENT ON COLUMN REPLY.R_CONTENT IS '댓글 내용';
COMMENT ON COLUMN REPLY.R_DATE IS '작성 날짜';
COMMENT ON COLUMN REPLY.R_STATUS IS '상태';
COMMENT ON COLUMN REPLY.REF_FNO IS '피드번호';
COMMENT ON COLUMN REPLY.MEM_NO IS '회원번호';

-- FEED 피드
COMMENT ON COLUMN FEED.FE_NO IS '피드번호';
COMMENT ON COLUMN FEED.REF_CNO IS '모임 번호';
COMMENT ON COLUMN FEED.FE_CONTENT IS '피드 내용';
COMMENT ON COLUMN FEED.FE_DATE IS '피드 작성일';
COMMENT ON COLUMN FEED.FE_WRITER IS '피드 작성자';
COMMENT ON COLUMN FEED.F_STATUS IS '피드 상태';

-- REPORT 신고
COMMENT ON COLUMN REPORT.RE_NO IS '신고 번호';
COMMENT ON COLUMN REPORT.RE_MEM IS '신고자';
COMMENT ON COLUMN REPORT.REF_CNO IS '참조 번호';
COMMENT ON COLUMN REPORT.RE_PMEM IS '피신고자';
COMMENT ON COLUMN REPORT.RE_CONTENT IS '신고 내용';
COMMENT ON COLUMN REPORT.RE_DATE IS '신고 날짜';

-- QNA 자주묻는질문
COMMENT ON COLUMN QNA.QNA_NO IS '글번호';
COMMENT ON COLUMN QNA.QNA_TITLE IS '제목';
COMMENT ON COLUMN QNA.QNA_CONTENT IS '내용';
COMMENT ON COLUMN QNA.QNA_STATUS IS '상태';

-- NOTICE 공지사항
COMMENT ON COLUMN NOTICE.NOTICE_NO IS '공지사항 번호';
COMMENT ON COLUMN NOTICE.NOTICE_TITLE IS '제목';
COMMENT ON COLUMN NOTICE.NOTICE_CONTENT IS '내용';
COMMENT ON COLUMN NOTICE.NOTICE_VIEWS IS '조회수';
COMMENT ON COLUMN NOTICE.NOTICE_DATE IS '작성일';
COMMENT ON COLUMN NOTICE.NOTICE_STATUS IS '상태';

-- GREAT 좋아요
COMMENT ON COLUMN GREAT.MEM_NO2 IS '회원번호';
COMMENT ON COLUMN GREAT.FE_NO IS '피드번호';

-- FOLLOW 팔로우
COMMENT ON COLUMN FOLLOW.TO_MEM IS '팔로잉';
COMMENT ON COLUMN FOLLOW.FROM_MEM IS '팔로워';

-- CL_MEM 참여 멤버
COMMENT ON COLUMN CL_MEM.CLASS_NO IS '모임번호';
COMMENT ON COLUMN CL_MEM.CL_MEM_NO IS '가입멤버';

-- MY_CLASS 내모임
COMMENT ON COLUMN MY_CLASS.CL_TYPE IS '모임타입';
COMMENT ON COLUMN MY_CLASS.CL_NAME IS '타입상태';

-- INTEREST 관심사
COMMENT ON COLUMN INTEREST.IN_NO IS '관심사번호';
COMMENT ON COLUMN INTEREST.IN_NO IS '관심사이름';

-- CL_TYPE 모임 성격
COMMENT ON COLUMN CL_TYPE.CL_CA_NO IS '모임카테고리 번호';
COMMENT ON COLUMN CL_TYPE.CL_CA_NAME IS '모임카테고리 이름';

-- CHATTING 채팅
-- ALARM 알람




--=============================================================
-- INSERT
-- MEMBER
INSERT INTO MEMBER
VALUES ('M'||SEQ_MNO.NEXTVAL, 'admin', '1234', '관리자','관리자', 'admin@kh.or.kr', 'F',
30, '010-1111-2222', SYSDATE, 'Y', 36.5, 4);

--CLASS
INSERT INTO CLASS
VALUES ('C'||SEQ_CNO.NEXTVAL, '모임명', '모임내용', '모임 위치', SYSDATE, 10000, '허락? 거절?',
'20~30', 6, '안내사항', 3, 1, 1);

-- ATTACHMENT 사진
-- REPLY 댓글
-- FEED 피드
-- REPORT 신고
-- QNA 자주묻는질문
-- NOTICE 공지사항
-- GREAT 좋아요
-- FOLLOW 팔로우
-- CL_MEM 참여 멤버
-- MY_CLASS 내모임
INSERT INTO MY_CLASS VALUES ( 1, '좋아요');
INSERT INTO MY_CLASS VALUES ( 2, '즐겨찾기');
INSERT INTO MY_CLASS VALUES ( 3, '대기 중');
INSERT INTO MY_CLASS VALUES ( 4, '진행 중');

-- INTEREST 관심사
INSERT INTO INTEREST VALUES ( 1, '문화 예술');
INSERT INTO INTEREST VALUES ( 2, '액티비티');
INSERT INTO INTEREST VALUES ( 3, '푸드 드링크');
INSERT INTO INTEREST VALUES ( 4, '취미');
INSERT INTO INTEREST VALUES ( 5, '파티 소개팅');
INSERT INTO INTEREST VALUES ( 6, '동네 친목');
INSERT INTO INTEREST VALUES ( 7, '재테크');
INSERT INTO INTEREST VALUES ( 8, '외국어');

-- CL_TYPE 모임 성격
INSERT INTO CL_TYPE VALUES ( 1, '소셜링');
INSERT INTO CL_TYPE VALUES ( 2, '클럽');
INSERT INTO CL_TYPE VALUES ( 3, '챌린지');
INSERT INTO CL_TYPE VALUES ( 4, '원데이 클래스');

-- CHATTING 채팅
-- ALARM 알람


COMMIT;
