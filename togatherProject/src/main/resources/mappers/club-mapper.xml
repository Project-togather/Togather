<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="clubMapper">

	<resultMap type="Club" id="resultclub">
		<result column="c_no" property="classNo"/>
		<result column="c_title" property="classTitle"/>
		<result column="c_content" property="classContent"/>
		<result column="c_location" property="classLocation"/>
		<result column="c_date" property="classDate"/>
		<result column="c_price" property="classPrice"/>
		<result column="c_approval" property="classApproval"/>
		<result column="minage" property="minAge"/>
		<result column="maxage" property="maxAge"/>
		<result column="people_limit" property="peopleLimit"/>
		<result column="cl_type" property="clType"/>
		<result column="in_no" property="inNo"/>
		<result column="curriculum" property="curriculum"/>
		
		<collection property="attachment" resultMap="attachment"/>
	</resultMap>
	
	<resultMap type="Attachment" id="attachment">
		<result column="origin_name" property="originName"/>
		<result column="update_name" property="updateName"/>
		<result column="file_path" property="filePath"/>
	</resultMap>
	
	<select id="selectSocialList" resultMap="resultclub">
		select 
		       c_no
		     , c_title
		     , c_content
		     , c_location
		     , c_date
		     , c_price
		     , c_approval
		     , age_limit
		     , people_limit
		     , cl_ca_no
		     , cl_type
		     , in_no
		     , curriculum
		     , origin_name
		     , update_name
		     , file_path
		  from class
		  join attachment on (c_no = ref_fno)
		 where status = 'Y'
		   and cl_ca_no = 1
	</select>
	
	<select id="selectClassDetail" resultMap="resultclub">
		select
		       c_no
		     , c_title
		     , c_content
		     , c_location
		     , c_date
		     , c_time
		     , c_price
		     , c_approval
		     , minage
		     , maxage
		     , people_limit
		     , cl_type
		     , in_no
		     , curriculum
		     , status
		     , nickname
		  from class
		  join member using (mem_no)
		 where c_no = 'C'||#{classNo}
		   and status = 'Y'
	</select>
</mapper>